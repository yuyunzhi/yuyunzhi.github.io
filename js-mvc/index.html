<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="余韵之">
  <meta name="description" content="余韵之的个人网站">
  <meta name="keywords" content="余韵之,前端">
  
  <link rel="prev" href="http://www.yuyunzhi.com/js-closure/" />
  <link rel="next" href="http://www.yuyunzhi.com/js-mobile-adaptation/" />
  <link rel="canonical" href="http://www.yuyunzhi.com/js-mvc/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           什么是MVC？ | 余韵之
       
  </title>
  <meta name="title" content="什么是MVC？ | 余韵之">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "http:\/\/www.yuyunzhi.com\/"
    },
    "articleSection" : "posts",
    "name" : "什么是MVC？",
    "headline" : "什么是MVC？",
    "description" : "这段时间写代码，总是会忘记之前写的代码是什么意思？ 那怎么办呢？ 有什么好的办法能够清晰的看明白自己之前写的代码或让别人也更好的一目了然？ 当然有，那就是…… 用MVC。\n 一、什么是MVC MVC是Model View Controller\n View：是这个js模块对应在html中的部分，就是展示给用户看的那一部分 Model：可以从服务器获得数据，把数据传给Controller。还要将Controller监听到的用户提交的数据上传到服务器 Controller：调用model的数据，用来更新view。还要监听用户在view上的操作，获取用户提交的数据，传给model  二、举个例子来理解 今天做了个留言板\n但是第一次用MVC重新改自己的代码花了我三个小时\u0026hellip;..来说说步骤：\n1、模块化 不同类型功能的JS代码放在不同的JS文件。同时一个监听事件包含了多个功能，要用队列来分开：xxx.addEventListener(\u0026lsquo;yyy\u0026rsquo;,function(){})\n2、立即执行函数  有些时候我们不想要全局变量，所以我们要使用局部变量 在ES 5 里面只有函数有局部变量，于是我们声明一个 function xxx，然后 xxx.call() 然而 xxx 是全局变量（全局函数），所以我们得用匿名函数：function(){}.call() 但是 Chrome 会语法错误，试出来一种方法可以不报错:！function(){}.call()  3、使用闭包 如果要两个模块变量能够访问……\n!function(){ var people={ name:\u0026#39;yukaka\u0026#39;, age:25 } window.yukakaGrouUp = function(){ people.age \u002b= 1 return people.age } }.call() 解释：\n 立即执行函数使得people 无法被外部访问 闭包使得匿名函数可以操作 people window.yukakaGrowUp 保存了匿名函数的地址 任何地方都可以调用 window.yukakaGrowUp（） =\u0026gt; 任何地方都可以使用 window.yukakaGrowUp 操作 people，但是不能直接访问 people  **什么是闭包？**函数内部使用了函数外面的变量，那么这个函数和这个变量加起来叫做闭包。",
    "inLanguage" : "zh-CN",
    "author" : "余韵之",
    "creator" : "余韵之",
    "publisher": "余韵之",
    "accountablePerson" : "余韵之",
    "copyrightHolder" : "余韵之",
    "copyrightYear" : "2018",
    "datePublished": "2018-06-07 23:00:23 \u002b0800 CST",
    "dateModified" : "2018-06-07 23:00:23 \u002b0800 CST",
    "url" : "http:\/\/www.yuyunzhi.com\/js-mvc\/",
    "wordCount" : "204",
    "keywords" : [ "MVC", "余韵之"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://www.yuyunzhi.com/">余韵之</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/contacts/" title="">Contact</a>
                
                <a class="menu-item" href="/resume/" title="">About</a>
                
                <a class="menu-item" href="/index.xml" title="">RSS</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://www.yuyunzhi.com/">余韵之</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/contacts/" title="">Contact</a>
                
                <a class="menu-item" href="/resume/" title="">About</a>
                
                <a class="menu-item" href="/index.xml" title="">RSS</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">什么是MVC？</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="http://www.yuyunzhi.com/" rel="author">余韵之</a> with ♥ 
                <span class="post-time">
                on <time datetime=2018-06-07 itemprop="datePublished">June 7, 2018</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="http://www.yuyunzhi.com/categories/javascript/"> JavaScript </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <blockquote>
<p>这段时间写代码，总是会忘记之前写的代码是什么意思？
那怎么办呢？
有什么好的办法能够清晰的看明白自己之前写的代码或让别人也更好的一目了然？
当然有，那就是……
用MVC。</p>
</blockquote>
<h2 id="一什么是mvc">一、什么是MVC</h2>
<p><strong>MVC是Model View Controller</strong></p>
<ul>
<li>View：是这个js模块对应在html中的部分，就是展示给用户看的那一部分</li>
<li>Model：可以从服务器获得数据，把数据传给Controller。还要将Controller监听到的用户提交的数据上传到服务器</li>
<li>Controller：调用model的数据，用来更新view。还要监听用户在view上的操作，获取用户提交的数据，传给model</li>
</ul>
<h2 id="二举个例子来理解">二、举个例子来理解</h2>
<p><strong>今天做了个留言板</strong></p>
<p>但是第一次用MVC重新改自己的代码花了我三个小时&hellip;..来说说步骤：</p>
<h3 id="1模块化">1、模块化</h3>
<p>不同类型功能的JS代码放在不同的JS文件。同时一个监听事件包含了多个功能，要用队列来分开：xxx.addEventListener(&lsquo;yyy&rsquo;,function(){})</p>
<h3 id="2立即执行函数">2、立即执行函数</h3>
<ul>
<li>有些时候我们不想要全局变量，所以我们要使用局部变量</li>
<li>在ES 5 里面只有函数有局部变量，于是我们声明一个 function xxx，然后 xxx.call()</li>
<li>然而 xxx 是全局变量（全局函数），所以我们得用匿名函数：function(){}.call()</li>
<li>但是 Chrome 会语法错误，试出来一种方法可以不报错:！function(){}.call()</li>
</ul>
<h3 id="3使用闭包">3、使用闭包</h3>
<p>如果要两个模块变量能够访问……</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-angular2" data-lang="angular2">!function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    var people=<span style="color:#960050;background-color:#1e0010">{</span>
    name:&#39;yukaka&#39;,
    age:25
}
window.yukakaGrouUp = function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    people.age += 1
    return people.age
}
}.call<span style="color:#960050;background-color:#1e0010">(</span>)
</code></pre></div><p><strong>解释：</strong></p>
<ul>
<li>立即执行函数使得people 无法被外部访问</li>
<li>闭包使得匿名函数可以操作 people</li>
<li>window.yukakaGrowUp 保存了匿名函数的地址</li>
<li>任何地方都可以调用 window.yukakaGrowUp（）</li>
<li>=&gt; 任何地方都可以使用 window.yukakaGrowUp 操作 people，但是不能直接访问 people</li>
</ul>
<p>**什么是闭包？**函数内部使用了函数外面的变量，那么这个函数和这个变量加起来叫做闭包。</p>
<h3 id="4开始用mvc改代码">4、开始用MVC改代码</h3>
<p>格式如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-angular2" data-lang="angular2">!function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    var view =document.querySelector<span style="color:#960050;background-color:#1e0010">(</span>&#39;#<span style="color:#a6e22e">xxx</span>&#39;)
    var model =<span style="color:#960050;background-color:#1e0010">{</span>
        init:function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>},
        fetch:function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>},
        save:function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>},
    }
    var controller =<span style="color:#960050;background-color:#1e0010">{</span>
        view:null,
        init:function(<span style="color:#a6e22e">view</span>)<span style="color:#960050;background-color:#1e0010">{</span>
             this.view=view
             //声明其他变量如下
             this.aaa=this.view.querySelector<span style="color:#960050;background-color:#1e0010">(</span>&#39;#<span style="color:#a6e22e">aaa</span>&#39;)
             this.bindEvents<span style="color:#960050;background-color:#1e0010">(</span>)
            //初始化调用其他的函数如下
             this.ccc<span style="color:#960050;background-color:#1e0010">(</span>)
        },
    }
    bindEvents:function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>}
    ccc:function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>}

    controller.init.call<span style="color:#960050;background-color:#1e0010">(</span>controller,view)
}.call<span style="color:#960050;background-color:#1e0010">(</span>)
</code></pre></div><p><strong>注意：</strong></p>
<ul>
<li>大致格式是这样的，但并不是所有的都要用，也并不是所有的都不用</li>
<li>controller.init.call(controller,view)，括号里的第一个参数是this，第二个及第二个以后的参数是arguments。上述调用可以写为controller.init(view)</li>
<li>箭头函数内外的this是一样的，或者不用箭头函数直接绑定this</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-angular2" data-lang="angular2"> let aTags=this.view.querySelectorAll<span style="color:#960050;background-color:#1e0010">(</span>&#39;nav.menu&gt;ul&gt;li&gt;a&#39;);
 for<span style="color:#960050;background-color:#1e0010">(</span>let i=0;i&lt;aTags.length;i++)<span style="color:#960050;background-color:#1e0010">{</span>
     aTags[<span style="color:#a6e22e">i</span>].onclick=function(<span style="color:#a6e22e">xxx</span>)<span style="color:#960050;background-color:#1e0010">{</span>
        xxx.preventDefault<span style="color:#960050;background-color:#1e0010">(</span>);
        let a =xxx.currentTarget;
        let href=a.getAttribute<span style="color:#960050;background-color:#1e0010">(</span>&#39;href&#39;)//&#34;#<span style="color:#a6e22e">siteAbout</span>&#34;
        let element = document.querySelector(<span style="color:#a6e22e">href</span>);
        this.scrollToElement(<span style="color:#a6e22e">element</span>)
     }.bind(<span style="color:#a6e22e">this</span>)//或把函数改为箭头函数，替换bind(<span style="color:#a6e22e">this</span>)
}
</code></pre></div><p>两段代码等价~~~~</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-angular2" data-lang="angular2">let aTags=this.view.querySelectorAll<span style="color:#960050;background-color:#1e0010">(</span>&#39;nav.menu&gt;ul&gt;li&gt;a&#39;);
 for<span style="color:#960050;background-color:#1e0010">(</span>let i=0;i&lt;aTags.length;i++)<span style="color:#960050;background-color:#1e0010">{</span>
     aTags[<span style="color:#a6e22e">i</span>].onclick=（xxx)=&gt;<span style="color:#960050;background-color:#1e0010">{</span>
        xxx.preventDefault<span style="color:#960050;background-color:#1e0010">(</span>);
        let a =xxx.currentTarget;
        let href=a.getAttribute<span style="color:#960050;background-color:#1e0010">(</span>&#39;href&#39;)//&#34;#<span style="color:#a6e22e">siteAbout</span>&#34;
        let element = document.querySelector(<span style="color:#a6e22e">href</span>);
        this.scrollToElement(<span style="color:#a6e22e">element</span>)
     }
}
</code></pre></div><p>将MVC封装函数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-angular2" data-lang="angular2">window.Model = function(<span style="color:#a6e22e">options</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    let resourceName = options.resourceName;
    return <span style="color:#960050;background-color:#1e0010">{</span>
        init : function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>},
        fetch: function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>},
        save: function<span style="color:#960050;background-color:#1e0010">(</span>)<span style="color:#960050;background-color:#1e0010">{</span>}
    }
}

window.View = function(<span style="color:#a6e22e">selector</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    return document.querySelector(<span style="color:#a6e22e">selector</span>);
}

window.Controller = function(<span style="color:#a6e22e">options</span>)<span style="color:#960050;background-color:#1e0010">{</span>
    let init = options.init;

    let object = <span style="color:#960050;background-color:#1e0010">{</span>
        view: null,
        model: null,
        init: function<span style="color:#960050;background-color:#1e0010">(</span>view,model)<span style="color:#960050;background-color:#1e0010">{</span>
            this.view = view;
            this.model = model;
            this.model.init<span style="color:#960050;background-color:#1e0010">(</span>);
            init.call(<span style="color:#a6e22e">this.view</span>);
            this.bindEvents.call(<span style="color:#a6e22e">this</span>)
        }
    };
    for<span style="color:#960050;background-color:#1e0010">(</span>let key in options)<span style="color:#960050;background-color:#1e0010">{</span>
        if<span style="color:#960050;background-color:#1e0010">(</span>key !== &#39;init&#39;)<span style="color:#960050;background-color:#1e0010">{</span>
            object[<span style="color:#a6e22e">key</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">options[key]</span>
        }
    }
    return object;
}
</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>余韵之 </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=http://www.yuyunzhi.com/js-mvc/>http://www.yuyunzhi.com/js-mvc/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="http://www.yuyunzhi.com/tags/mvc/">
                    #MVC</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="http://www.yuyunzhi.com/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://www.yuyunzhi.com/js-closure/" class="prev" rel="prev" title="什么是闭包，闭包的用途是什么？"><i class="iconfont icon-left"></i>&nbsp;什么是闭包，闭包的用途是什么？</a>
         
        
        <a href="http://www.yuyunzhi.com/js-mobile-adaptation/" class="next" rel="next" title="移动端是怎么做适配的？">移动端是怎么做适配的？&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2018 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="http://www.yuyunzhi.com/">余韵之</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
